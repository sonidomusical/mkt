<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Reproductor de Música Pro</title>

	<meta property="og:title" content="Reproductor de Música Pro" />
	<meta property="og:description" content="El fin de todo el discurso que has oído es: Teme a Dios y guarda sus mandamientos, porque esto es el todo del hombre. Pues Dios traerá toda obra a juicio, juntamente con toda cosa oculta, sea buena o sea mala." />
	<meta property="og:url" content="https://generalonepe.github.io/mkt" />
	<meta property="og:site_name" content="Eclesiastés 12:13-14" />
	<meta property="og:type" content="music.song" />

	<meta property="og:image" content="https://i.postimg.cc/D0B9z1Vj/logo-player.png" />
	<meta property="og:image:width" content="640" />
	<meta property="og:image:height" content="640" />

	<meta property="og:audio" content="URL_DE_TU_ARCHIVO_DE_AUDIO.mp3" />
	<meta property="og:audio:type" content="audio/mpeg" />

	<meta property="music:musician" content="Grupo2" />
	<meta property="music:album" content="Instrumental" />
	<meta property="music:release_date" content="2025" />

    <!-- Google Fonts y Phosphor Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        :root {
            /* Paleta de colores "Light & Vibrant" */
            --background: #f9f9f9; /* Gris muy claro de fondo */
            --surface: #ffffff; /* Blanco puro para la tarjeta */
            --primary-text: #333333; /* Gris oscuro para texto principal */
            --secondary-text: #888888; /* Gris medio para texto secundario */
            
            /* Gradiente y acentos naranjas */
            --gradient-start: #FFC107; /* Amarillo ámbar */
            --gradient-end: #FF9800;   /* Naranja vibrante */
            --accent-color: #FF9800;   /* Color principal de acción */
            --accent-soft: #FFF3E0;    /* Fondo suave para item activo */
            --accent-text: #E65100;    /* Texto oscuro para item activo */
            
            --border-color: #f0f0f0;   /* Bordes muy sutiles */
            --font-main: 'Inter', sans-serif;
            --safe-area-bottom: env(safe-area-inset-bottom, 1rem);
        }

        html {
            font-size: 100%; 
        }

        body {
            font-family: var(--font-main);
            background-color: var(--background);
            color: var(--primary-text);
            margin: 0;
            font-size: 0.875rem; /* 14px */
            overflow: hidden; /* Evitar scroll en el body */
            display: flex;
            justify-content: center; /* Centrar la tarjeta en pantallas grandes */
            align-items: center;
            min-height: 100vh;
        }

        /* --- Estructura del Reproductor --- */
        .player-container {
            width: 100%;
            height: 100vh; /* En móvil ocupa todo el alto por defecto */
            /* En móvil hacemos que parezca que el fondo es gris pero la app blanca */
            background-color: var(--surface);
            display: flex;
            flex-direction: column; 
            overflow: hidden;
            position: relative;
        }

        .main-view { 
            position: relative; 
            flex-grow: 1; 
            display: flex; 
            overflow: hidden; 
        }

        /* --- Panel de Playlist --- */
        .playlist-container {
            width: 100%;
            padding: 1.5rem; /* Un poco más de espacio */
            box-sizing: border-box;
            overflow-y: auto;
            /* Aumentado el padding inferior para asegurar que se vea el final de la lista */
            padding-bottom: 180px; 
        }
        
        #playlist-title {
            margin-top: 0; 
            color: white; /* Texto blanco sobre el gradiente */
            font-weight: 700;
            font-size: 1.1rem;
            
            /* Estilo de tarjeta con gradiente */
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            padding: 1.5rem;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.25);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        #playlist { list-style: none; padding: 0; margin: 0; }
        #playlist li {
            padding: 1rem; 
            border-radius: 0.75rem; 
            margin-bottom: 0.5rem;
            cursor: pointer; 
            transition: all 0.2s ease;
            border-bottom: 1px solid var(--border-color);
            color: var(--primary-text);
            font-weight: 500;
        }
        
        /* Quitar borde del último elemento */
        #playlist li:last-child { border-bottom: none; }

        #playlist li:hover { 
            background-color: #fafafa; 
            transform: translateX(4px);
        }
        
        /* Estilo activo "Vibrant" */
        #playlist li.active { 
            background-color: var(--accent-soft); 
            color: var(--accent-text); 
            font-weight: 700;
            border-bottom-color: transparent;
            box-shadow: 0 2px 8px rgba(255, 152, 0, 0.1);
        }
        

        /* --- Barra de Reproductor Fija --- */
        .player-controls {
            background-color: rgba(255, 255, 255, 0.95); /* Blanco translúcido */
            backdrop-filter: blur(10px);
            padding: 1rem 1.5rem; 
            /* AUMENTADO significativamente para evitar superposición con botones de Android */
            padding-bottom: calc(2.5rem + var(--safe-area-bottom)); 
            border-top: 1px solid var(--border-color);
            z-index: 100; flex-shrink: 0;
            position: absolute; /* Absolute relative to container */
            bottom: 0;
            left: 0;
            right: 0;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05); /* Sombra suave hacia arriba */
        }
        
        #now-playing {
            text-align: center; font-weight: 600; margin-bottom: 0.75rem;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            color: var(--primary-text);
            font-size: 0.95rem;
        }
        
        .progress-container {
            width: 100%; height: 0.35rem; 
            background-color: #eeeeee; /* Gris muy claro */
            border-radius: 1rem; cursor: pointer; margin-bottom: 0.5rem;
        }
        #progress-bar {
            width: 0%; height: 100%; 
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            border-radius: 1rem;
            box-shadow: 0 0 10px rgba(255, 152, 0, 0.4);
        }
        
        .time-stamps {
            display: flex; justify-content: space-between; font-size: 0.75rem;
            color: var(--secondary-text); margin-bottom: 0.5rem; font-weight: 500;
        }
        
        .buttons-container {
            display: flex; justify-content: center; align-items: center; gap: 1.5rem;
        }
        .buttons-container button {
            background: none; border: none; color: var(--primary-text); cursor: pointer;
            transition: transform 0.2s;
        }
        .buttons-container button:active { transform: scale(0.9); }
        .buttons-container button i { font-size: 1.8rem; color: #555; }
        
        /* Botón de Play destacado */
        #play-pause-btn {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            border-radius: 50%;
            width: 3.5rem;
            height: 3.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(255, 152, 0, 0.3);
        }
        #play-pause-btn i { 
            font-size: 1.8rem; 
            color: white; 
            margin-left: 2px; /* Ajuste óptico para el icono de play */
        }
        /* Ajuste óptico cuando es pausa */
        #play-pause-btn i.ph-pause-circle, 
        #play-pause-btn i.ph-pause { 
            margin-left: 0; 
        }

        ::-webkit-scrollbar { width: 0.4rem; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #ddd; border-radius: 0.5rem; }

        /* --- Diseño Responsivo y Escritorio --- */
        @media screen and (min-width: 48rem) { /* 768px */
            .player-container {
                width: 90%; 
                max-width: 420px; /* Ancho típico de móvil para mantener el diseño de tarjeta */
                height: 85vh; 
                max-height: 800px;
                border-radius: 24px; /* Bordes muy redondeados */
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); /* Sombra elegante */
                border: 1px solid white; /* Borde sutil */
            }
            .player-controls { 
                border-radius: 0 0 24px 24px; /* Redondear abajo */
                padding-bottom: 1.5rem; 
            }
        }
    </style>
</head>
<body>
    
    <div class="player-container">
        <div class="main-view">
            <div class="playlist-container">
                 <div id="playlist-title">Lista de Reproducción v0306</div>
                 <ul id="playlist"></ul>
            </div>
        </div>
        <div class="player-controls">
            <div id="now-playing">Selecciona una canción</div>
            <div class="progress-container" id="progress-container">
                <div id="progress-bar"></div>
            </div>
            <div class="time-stamps">
                <span id="current-time">0:00</span>
                <span id="total-duration">0:00</span>
            </div>
            <div class="buttons-container">
                <button id="prev-btn"><i class="ph-fill ph-skip-back"></i></button>
                <button id="play-pause-btn"><i class="ph-fill ph-play"></i></button>
                <button id="next-btn"><i class="ph-fill ph-skip-forward"></i></button>
            </div>
        </div>
    </div>
    
    <audio id="audio-player"></audio>

    <script>
        // --- VIEWPORT HEIGHT FIX FOR MOBILE BROWSERS ---
        const setVh = () => {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        };
        window.addEventListener('resize', setVh);
        setVh(); // Set initial value

        // --- 1. GESTIÓN DE DATOS ---
        const playlistData = [
            {
                title: "tedarelomejor_jar",
                src: "https://files.catbox.moe/ym19f8.mp3",
                toneSequence: "E",
                toneRehearsed: "E"
            },
            {
                title: "Serallenalatierra_Marcos_1992 (Ofrenda)",
                src: "https://files.catbox.moe/pc8yd5.mp3",
                toneSequence: "Am",
                toneRehearsed: "Am"
            },
            {
                title: "contodamialma_comandogaf",
                src: "https://files.catbox.moe/gw830q.mp3",
                toneSequence: "-",
                toneRehearsed: "-"
            },
            {
                title: "desdemiinterior_hillsong",
                src: "https://files.catbox.moe/7at25k.mp3",
                toneSequence: "F",
                toneRehearsed: "F"
            },
            {
                title: "miroca_hillsong (Llamado)",
                src: "https://files.catbox.moe/jfbese.mp3",
                toneSequence: "C",
                toneRehearsed: "C"
            }
        ];

        // --- 2. REFERENCIAS A ELEMENTOS DEL DOM ---
        const audioPlayer = document.getElementById('audio-player');
        const playlistEl = document.getElementById('playlist');
        const nowPlayingEl = document.getElementById('now-playing');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeEl = document.getElementById('current-time');
        const totalDurationEl = document.getElementById('total-duration');

        let currentTrackIndex = 0;
        let isPlaying = false;

        // --- 3. FUNCIONES PRINCIPALES ---
        
        function loadTrack(trackIndex) {
            if (trackIndex < 0 || trackIndex >= playlistData.length) {
                nowPlayingEl.textContent = "Selecciona una canción";
                currentTimeEl.textContent = "0:00";
                totalDurationEl.textContent = "0:00";
                progressBar.style.width = "0%";
                return;
            }

            currentTrackIndex = trackIndex;
            const track = playlistData[trackIndex];
            audioPlayer.src = track.src; 
            
            // --- ACTUALIZACIÓN DE TEXTO ---
            nowPlayingEl.textContent = `Tono-Secuencia: ${track.toneSequence} | Tono-Ensayado: ${track.toneRehearsed}`; 
            
            updatePlaylistUI();
        }

        function playTrack() {
            if (!audioPlayer.src || audioPlayer.src === window.location.href) {
                return;
            }
            
            const playPromise = audioPlayer.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    isPlaying = true;
                    // Cambio de icono Play/Pause
                    playPauseBtn.innerHTML = '<i class="ph-fill ph-pause"></i>';
                }).catch(error => {
                    if (error.name !== 'AbortError') {
                        console.error("Audio playback error:", error);
                        isPlaying = false;
                        playPauseBtn.innerHTML = '<i class="ph-fill ph-play"></i>';
                    }
                });
            }
        }

        function pauseTrack() {
            isPlaying = false;
            audioPlayer.pause();
            playPauseBtn.innerHTML = '<i class="ph-fill ph-play"></i>';
        }

        function playPauseTrack() { 
            if (!audioPlayer.src || audioPlayer.src === window.location.href) {
                return;
            }
            isPlaying ? pauseTrack() : playTrack(); 
        }
        
        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % playlistData.length;
            loadTrack(currentTrackIndex);
            playTrack();
        }
        
        function prevTrack() {
            currentTrackIndex = (currentTrackIndex - 1 + playlistData.length) % playlistData.length;
            loadTrack(currentTrackIndex);
            playTrack();
        }
        
        function updateProgress(e) {
            const { duration, currentTime } = e.srcElement;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            totalDurationEl.textContent = formatTime(duration);
            currentTimeEl.textContent = formatTime(currentTime);
        }

        function setProgress(e) {
            if (audioPlayer.duration) {
                const width = this.clientWidth;
                const clickX = e.offsetX;
                const duration = audioPlayer.duration;
                audioPlayer.currentTime = (clickX / width) * duration;
            }
        }
        
        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function updatePlaylistUI() {
             Array.from(playlistEl.children).forEach((item, index) => {
                if (index === currentTrackIndex) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }
        
        function populatePlaylist() {
            playlistEl.innerHTML = '';
            playlistData.forEach((track, index) => {
                const li = document.createElement('li');
                // Numeración automática
                li.textContent = `${index + 1}. ${track.title}`; 
                li.addEventListener('click', () => {
                    loadTrack(index);
                    playTrack();
                });
                playlistEl.appendChild(li);
            });
        }
        
        // --- 4. INICIALIZACIÓN Y EVENT LISTENERS ---
        
        playPauseBtn.addEventListener('click', playPauseTrack);
        nextBtn.addEventListener('click', nextTrack);
        prevBtn.addEventListener('click', prevTrack);
        audioPlayer.addEventListener('timeupdate', updateProgress);
        audioPlayer.addEventListener('ended', nextTrack);
        progressContainer.addEventListener('click', setProgress);
        
        audioPlayer.addEventListener('loadedmetadata', () => {
             totalDurationEl.textContent = formatTime(audioPlayer.duration);
        });
        
        populatePlaylist();
        loadTrack(-1); 

    </script>
</body>
</html>
